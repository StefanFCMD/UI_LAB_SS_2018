"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var Geolocation = require("nativescript-geolocation");
var router_1 = require("@angular/router");
var app = require("tns-core-modules/application");
var SensorsComponent = /** @class */ (function () {
    function SensorsComponent(router) {
        this.router = router;
        this.latitude = 0;
        this.longitude = 0;
        this.azimuth = 0;
        this.pitch = 0;
        this.roll = 0;
        this.temperature = 0;
        this.magenticX = 0;
        this.magenticY = 0;
        this.magenticZ = 0;
        this.gyroX = 0;
        this.gyroY = 0;
        this.gyroZ = 0;
        this.light = 0;
        this.updateLocation();
    }
    SensorsComponent.prototype.getDeviceLocation = function () {
        return new Promise(function (resolve, reject) {
            Geolocation.enableLocationRequest().then(function () {
                Geolocation.getCurrentLocation({ timeout: 10000 }).then(function (location) {
                    resolve(location);
                }).catch(function (error) {
                    reject(error);
                });
            });
        });
    };
    SensorsComponent.prototype.updateLocation = function () {
        var _this = this;
        this.getDeviceLocation().then(function (result) {
            _this.latitude = result.latitude;
            _this.longitude = result.longitude;
        }, function (error) {
            console.error(error);
        });
    };
    SensorsComponent.prototype.onAccuracyChanged = function (sensor, accuracy) {
        console.log('onAccuracyChanged:', accuracy);
    };
    SensorsComponent.prototype.onSensorChanged = function (event) {
        if (event.sensor.getType() == android.hardware.Sensor.TYPE_ACCELEROMETER) {
            this.azimuth = event.values[0];
            this.pitch = event.values[1];
            this.roll = event.values[2];
            console.log('azimuth', this.azimuth);
            console.log('pitch', this.pitch);
            console.log('roll', this.roll);
        }
        else if (event.sensor.getType() == android.hardware.Sensor.TYPE_AMBIENT_TEMPERATURE) {
            this.temperature = event.values[0];
            console.log('Temperature', event.values[0]);
        }
        else if (event.sensor.getType() == android.hardware.Sensor.TYPE_MAGNETIC_FIELD) {
            this.magenticX = event.values[0];
            this.magenticY = event.values[1];
            this.magenticZ = event.values[2];
            console.log('Magnetic X', event.values[0]);
            console.log('Magnetic Y', event.values[1]);
            console.log('Magnetic Z', event.values[2]);
        }
        else if (event.sensor.getType() == android.hardware.Sensor.TYPE_GYROSCOPE) {
            this.gyroX = event.values[0];
            this.gyroY = event.values[1];
            this.gyroZ = event.values[2];
            console.log('Gyro X', event.values[0]);
            console.log('Gyro Y', event.values[1]);
            console.log('Gyro Z', event.values[2]);
        }
        else if (event.sensor.getType() == android.hardware.Sensor.TYPE_LIGHT) {
            this.light = event.values[0];
            console.log('Light', event.values[0]);
        }
        else {
            //console.log('Other Sensor: ', event.sensor.getType())
        }
    };
    SensorsComponent.prototype.ngOnInit = function () {
        var sensorManager = app.android.foregroundActivity.getSystemService(android.content.Context.SENSOR_SERVICE), accelerometer, temperature, magnetic, gyroscope, light, sensorActivity;
        sensorActivity = new android.hardware.SensorEventListener({
            onAccuracyChanged: this.onAccuracyChanged,
            onSensorChanged: this.onSensorChanged
        });
        accelerometer = sensorManager.getDefaultSensor(android.hardware.Sensor.TYPE_ACCELEROMETER);
        temperature = sensorManager.getDefaultSensor(android.hardware.Sensor.TYPE_AMBIENT_TEMPERATURE);
        magnetic = sensorManager.getDefaultSensor(android.hardware.Sensor.TYPE_MAGNETIC_FIELD);
        gyroscope = sensorManager.getDefaultSensor(android.hardware.Sensor.TYPE_GYROSCOPE);
        light = sensorManager.getDefaultSensor(android.hardware.Sensor.TYPE_LIGHT);
        sensorManager.registerListener(sensorActivity, accelerometer, android.hardware.SensorManager.SENSOR_DELAY_NORMAL);
        sensorManager.registerListener(sensorActivity, temperature, android.hardware.SensorManager.SENSOR_DELAY_NORMAL);
        sensorManager.registerListener(sensorActivity, magnetic, android.hardware.SensorManager.SENSOR_DELAY_NORMAL);
        sensorManager.registerListener(sensorActivity, gyroscope, android.hardware.SensorManager.SENSOR_DELAY_NORMAL);
        sensorManager.registerListener(sensorActivity, light, android.hardware.SensorManager.SENSOR_DELAY_NORMAL);
    };
    SensorsComponent.prototype.openSensors = function () {
        this.router.navigate(["/sensors"]);
    };
    SensorsComponent.prototype.openCamera = function () {
        this.router.navigate(["/camera"]);
    };
    SensorsComponent.prototype.openList = function () {
        this.router.navigate(["/list"]);
    };
    SensorsComponent = __decorate([
        core_1.Component({
            selector: "sensors",
            moduleId: module.id,
            templateUrl: "./sensors.html",
            styleUrls: ["./sensors-common.css", "./sensors.css"],
        }),
        __metadata("design:paramtypes", [router_1.Router])
    ], SensorsComponent);
    return SensorsComponent;
}());
exports.SensorsComponent = SensorsComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Vuc29ycy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZW5zb3JzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUF5RDtBQUV6RCxzREFBd0Q7QUFDeEQsMENBQXlDO0FBY3pDLGtEQUFvRDtBQVVwRDtJQXFCRSwwQkFBMkIsTUFBYztRQUFkLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDdkMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7UUFFbkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUVkLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRXJCLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBRW5CLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUVmLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWYsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBRXhCLENBQUM7SUFFTyw0Q0FBaUIsR0FBekI7UUFDRSxNQUFNLENBQUMsSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTTtZQUNqQyxXQUFXLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxJQUFJLENBQUM7Z0JBQ3ZDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDLElB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dCwgTmdab25lLCBPbkluaXR9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5pbXBvcnQgKiBhcyBHZW9sb2NhdGlvbiBmcm9tIFwibmF0aXZlc2NyaXB0LWdlb2xvY2F0aW9uXCI7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcclxuXHJcbmltcG9ydCB7IFNlZ21lbnRlZEJhckl0ZW0gfSBmcm9tIFwidWkvc2VnbWVudGVkLWJhclwiO1xyXG5pbXBvcnQgeyBBY2N1cmFjeSB9IGZyb20gXCJ1aS9lbnVtc1wiO1xyXG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gXCJ1aS9sYWJlbFwiO1xyXG5cclxuaW1wb3J0IHZpZXcgPSByZXF1aXJlKFwidWkvY29yZS92aWV3XCIpO1xyXG5pbXBvcnQgcGFnZXMgPSByZXF1aXJlKFwidWkvcGFnZVwiKTtcclxuXHJcbmltcG9ydCBvYnNlcnZhYmxlID0gcmVxdWlyZShcImRhdGEvb2JzZXJ2YWJsZVwiKTtcclxuXHJcbmltcG9ydCB7IEV2ZW50RGF0YSwgT2JzZXJ2YWJsZSB9IGZyb20gJ2RhdGEvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IEJpbmRpbmdPcHRpb25zIH0gZnJvbSBcInVpL2NvcmUvYmluZGFibGVcIjtcclxuXHJcbmltcG9ydCAqIGFzIGFwcCBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9hcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9wbGF0Zm9ybVwiO1xyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiBcInNlbnNvcnNcIixcclxuICBtb2R1bGVJZDogbW9kdWxlLmlkLFxyXG4gIHRlbXBsYXRlVXJsOiBcIi4vc2Vuc29ycy5odG1sXCIsXHJcbiAgc3R5bGVVcmxzOiBbXCIuL3NlbnNvcnMtY29tbW9uLmNzc1wiLCBcIi4vc2Vuc29ycy5jc3NcIl0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTZW5zb3JzQ29tcG9uZW50IHtcclxuXHJcbiAgcHVibGljIGxhdGl0dWRlOiBudW1iZXI7XHJcbiAgcHVibGljIGxvbmdpdHVkZTogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgYXppbXV0aDogbnVtYmVyO1xyXG4gIHB1YmxpYyBwaXRjaDogbnVtYmVyO1xyXG4gIHB1YmxpYyByb2xsOiBudW1iZXI7XHJcblxyXG4gIHB1YmxpYyB0ZW1wZXJhdHVyZTogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgbWFnZW50aWNYOiBudW1iZXI7XHJcbiAgcHVibGljIG1hZ2VudGljWTogbnVtYmVyO1xyXG4gIHB1YmxpYyBtYWdlbnRpY1o6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIGd5cm9YOiBudW1iZXI7XHJcbiAgcHVibGljIGd5cm9ZOiBudW1iZXI7XHJcbiAgcHVibGljIGd5cm9aOiBudW1iZXI7XHJcblxyXG4gIHB1YmxpYyBsaWdodDogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSByb3V0ZXI6IFJvdXRlcikge1xyXG4gICAgdGhpcy5sYXRpdHVkZSA9IDA7XHJcbiAgICB0aGlzLmxvbmdpdHVkZSA9IDA7XHJcblxyXG4gICAgdGhpcy5hemltdXRoID0gMDtcclxuICAgIHRoaXMucGl0Y2ggPSAwO1xyXG4gICAgdGhpcy5yb2xsID0gMDtcclxuXHJcbiAgICB0aGlzLnRlbXBlcmF0dXJlID0gMDtcclxuXHJcbiAgICB0aGlzLm1hZ2VudGljWCA9IDA7XHJcbiAgICB0aGlzLm1hZ2VudGljWSA9IDA7XHJcbiAgICB0aGlzLm1hZ2VudGljWiA9IDA7XHJcblxyXG4gICAgdGhpcy5neXJvWCA9IDA7XHJcbiAgICB0aGlzLmd5cm9ZID0gMDtcclxuICAgIHRoaXMuZ3lyb1ogPSAwO1xyXG5cclxuICAgIHRoaXMubGlnaHQgPSAwO1xyXG5cclxuICAgIHRoaXMudXBkYXRlTG9jYXRpb24oKTtcclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldERldmljZUxvY2F0aW9uKCk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBHZW9sb2NhdGlvbi5lbmFibGVMb2NhdGlvblJlcXVlc3QoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBHZW9sb2NhdGlvbi5nZXRDdXJyZW50TG9jYXRpb24oe3RpbWVvdXQ6IDEwMDAwfSkudGhlbihsb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKGxvY2F0aW9uKTtcclxuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZUxvY2F0aW9uKCkge1xyXG4gICAgdGhpcy5nZXREZXZpY2VMb2NhdGlvbigpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgdGhpcy5sYXRpdHVkZSA9IHJlc3VsdC5sYXRpdHVkZTtcclxuICAgICAgdGhpcy5sb25naXR1ZGUgPSByZXN1bHQubG9uZ2l0dWRlO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25BY2N1cmFjeUNoYW5nZWQoc2Vuc29yLCBhY2N1cmFjeSkge1xyXG4gICAgY29uc29sZS5sb2coJ29uQWNjdXJhY3lDaGFuZ2VkOicsIGFjY3VyYWN5KTtcclxuICB9XHJcblxyXG4gIG9uU2Vuc29yQ2hhbmdlZChldmVudCkge1xyXG4gICAgaWYoZXZlbnQuc2Vuc29yLmdldFR5cGUoKSA9PSBhbmRyb2lkLmhhcmR3YXJlLlNlbnNvci5UWVBFX0FDQ0VMRVJPTUVURVIpe1xyXG4gICAgICB0aGlzLmF6aW11dGggPSBldmVudC52YWx1ZXNbMF07XHJcbiAgICAgIHRoaXMucGl0Y2ggPSBldmVudC52YWx1ZXNbMV07XHJcbiAgICAgIHRoaXMucm9sbCA9IGV2ZW50LnZhbHVlc1syXTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdhemltdXRoJywgdGhpcy5hemltdXRoKTtcclxuICAgICAgY29uc29sZS5sb2coJ3BpdGNoJywgdGhpcy5waXRjaCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdyb2xsJywgdGhpcy5yb2xsKTtcclxuXHJcbiAgICB9ZWxzZSBpZihldmVudC5zZW5zb3IuZ2V0VHlwZSgpID09IGFuZHJvaWQuaGFyZHdhcmUuU2Vuc29yLlRZUEVfQU1CSUVOVF9URU1QRVJBVFVSRSl7XHJcbiAgICAgIHRoaXMudGVtcGVyYXR1cmUgPSBldmVudC52YWx1ZXNbMF07XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnVGVtcGVyYXR1cmUnLCBldmVudC52YWx1ZXNbMF0pO1xyXG5cclxuICAgIH1lbHNlIGlmKGV2ZW50LnNlbnNvci5nZXRUeXBlKCkgPT0gYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3IuVFlQRV9NQUdORVRJQ19GSUVMRCl7XHJcbiAgICAgIHRoaXMubWFnZW50aWNYID0gZXZlbnQudmFsdWVzWzBdO1xyXG4gICAgICB0aGlzLm1hZ2VudGljWSA9IGV2ZW50LnZhbHVlc1sxXTtcclxuICAgICAgdGhpcy5tYWdlbnRpY1ogPSBldmVudC52YWx1ZXNbMl07XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnTWFnbmV0aWMgWCcsIGV2ZW50LnZhbHVlc1swXSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNYWduZXRpYyBZJywgZXZlbnQudmFsdWVzWzFdKTtcclxuICAgICAgY29uc29sZS5sb2coJ01hZ25ldGljIFonLCBldmVudC52YWx1ZXNbMl0pO1xyXG5cclxuICAgIH1lbHNlIGlmKGV2ZW50LnNlbnNvci5nZXRUeXBlKCkgPT0gYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3IuVFlQRV9HWVJPU0NPUEUpe1xyXG4gICAgICB0aGlzLmd5cm9YID0gZXZlbnQudmFsdWVzWzBdO1xyXG4gICAgICB0aGlzLmd5cm9ZID0gZXZlbnQudmFsdWVzWzFdO1xyXG4gICAgICB0aGlzLmd5cm9aID0gZXZlbnQudmFsdWVzWzJdO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ0d5cm8gWCcsIGV2ZW50LnZhbHVlc1swXSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdHeXJvIFknLCBldmVudC52YWx1ZXNbMV0pO1xyXG4gICAgICBjb25zb2xlLmxvZygnR3lybyBaJywgZXZlbnQudmFsdWVzWzJdKTtcclxuICAgICAgXHJcbiAgICB9ZWxzZSBpZihldmVudC5zZW5zb3IuZ2V0VHlwZSgpID09IGFuZHJvaWQuaGFyZHdhcmUuU2Vuc29yLlRZUEVfTElHSFQpeyAgXHJcbiAgICAgIHRoaXMubGlnaHQgPSBldmVudC52YWx1ZXNbMF07XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnTGlnaHQnLCBldmVudC52YWx1ZXNbMF0pXHJcblxyXG4gICAgfWVsc2V7ICBcclxuICAgICAgLy9jb25zb2xlLmxvZygnT3RoZXIgU2Vuc29yOiAnLCBldmVudC5zZW5zb3IuZ2V0VHlwZSgpKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB2YXIgc2Vuc29yTWFuYWdlciA9IGFwcC5hbmRyb2lkLmZvcmVncm91bmRBY3Rpdml0eS5nZXRTeXN0ZW1TZXJ2aWNlKFxyXG4gICAgICAgICAgYW5kcm9pZC5jb250ZW50LkNvbnRleHQuU0VOU09SX1NFUlZJQ0VcclxuICAgICAgICApLFxyXG4gICAgICAgIGFjY2VsZXJvbWV0ZXIsXHJcbiAgICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICAgICAgbWFnbmV0aWMsXHJcbiAgICAgICAgZ3lyb3Njb3BlLFxyXG4gICAgICAgIGxpZ2h0LFxyXG4gICAgICAgIHNlbnNvckFjdGl2aXR5O1xyXG4gIFxyXG4gICAgc2Vuc29yQWN0aXZpdHkgPSBuZXcgYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3JFdmVudExpc3RlbmVyKHtcclxuICAgICAgb25BY2N1cmFjeUNoYW5nZWQ6IHRoaXMub25BY2N1cmFjeUNoYW5nZWQsXHJcbiAgICAgIG9uU2Vuc29yQ2hhbmdlZDogdGhpcy5vblNlbnNvckNoYW5nZWRcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgYWNjZWxlcm9tZXRlciA9IHNlbnNvck1hbmFnZXIuZ2V0RGVmYXVsdFNlbnNvcihcclxuICAgICAgYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3IuVFlQRV9BQ0NFTEVST01FVEVSXHJcbiAgICApO1xyXG5cclxuICAgIHRlbXBlcmF0dXJlID0gc2Vuc29yTWFuYWdlci5nZXREZWZhdWx0U2Vuc29yKFxyXG4gICAgICBhbmRyb2lkLmhhcmR3YXJlLlNlbnNvci5UWVBFX0FNQklFTlRfVEVNUEVSQVRVUkVcclxuICAgICk7XHJcblxyXG4gICAgbWFnbmV0aWMgPSBzZW5zb3JNYW5hZ2VyLmdldERlZmF1bHRTZW5zb3IoXHJcbiAgICAgIGFuZHJvaWQuaGFyZHdhcmUuU2Vuc29yLlRZUEVfTUFHTkVUSUNfRklFTERcclxuICAgICk7XHJcblxyXG4gICAgZ3lyb3Njb3BlID0gc2Vuc29yTWFuYWdlci5nZXREZWZhdWx0U2Vuc29yKFxyXG4gICAgICBhbmRyb2lkLmhhcmR3YXJlLlNlbnNvci5UWVBFX0dZUk9TQ09QRVxyXG4gICAgKTtcclxuXHJcbiAgICBsaWdodCA9IHNlbnNvck1hbmFnZXIuZ2V0RGVmYXVsdFNlbnNvcihcclxuICAgICAgYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3IuVFlQRV9MSUdIVFxyXG4gICAgKTtcclxuICBcclxuICAgIHNlbnNvck1hbmFnZXIucmVnaXN0ZXJMaXN0ZW5lcihzZW5zb3JBY3Rpdml0eSxhY2NlbGVyb21ldGVyLGFuZHJvaWQuaGFyZHdhcmUuU2Vuc29yTWFuYWdlci5TRU5TT1JfREVMQVlfTk9STUFMKTtcclxuICAgIHNlbnNvck1hbmFnZXIucmVnaXN0ZXJMaXN0ZW5lcihzZW5zb3JBY3Rpdml0eSx0ZW1wZXJhdHVyZSxhbmRyb2lkLmhhcmR3YXJlLlNlbnNvck1hbmFnZXIuU0VOU09SX0RFTEFZX05PUk1BTCk7XHJcbiAgICBzZW5zb3JNYW5hZ2VyLnJlZ2lzdGVyTGlzdGVuZXIoc2Vuc29yQWN0aXZpdHksbWFnbmV0aWMsYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3JNYW5hZ2VyLlNFTlNPUl9ERUxBWV9OT1JNQUwpO1xyXG4gICAgc2Vuc29yTWFuYWdlci5yZWdpc3Rlckxpc3RlbmVyKHNlbnNvckFjdGl2aXR5LGd5cm9zY29wZSxhbmRyb2lkLmhhcmR3YXJlLlNlbnNvck1hbmFnZXIuU0VOU09SX0RFTEFZX05PUk1BTCk7XHJcbiAgICBzZW5zb3JNYW5hZ2VyLnJlZ2lzdGVyTGlzdGVuZXIoc2Vuc29yQWN0aXZpdHksbGlnaHQsYW5kcm9pZC5oYXJkd2FyZS5TZW5zb3JNYW5hZ2VyLlNFTlNPUl9ERUxBWV9OT1JNQUwpO1xyXG5cclxuICB9XHJcblxyXG4gIG9wZW5TZW5zb3JzKCkge1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW1wiL3NlbnNvcnNcIl0pO1xyXG4gIH1cclxuXHJcbiAgb3BlbkNhbWVyYSgpIHtcclxuICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcIi9jYW1lcmFcIl0pO1xyXG4gIH1cclxuXHJcbiAgb3Blbkxpc3QoKSB7XHJcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbXCIvbGlzdFwiXSk7XHJcbiAgfVxyXG5cclxufSAgICAgICJdfQ==